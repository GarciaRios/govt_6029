head(gapminder, 10)
glimpse(gapminder)
filter(gapminder, lifeExp < 29)
filter(gapminder, country == Rwanda)
filter(gapminder, country == "Rwanda")
filter(gapminder, continent == "Africa", year < 1966, lifeExp < 40)
gapminder <-
filter(gapminder, continent == "Africa", year < 1966, lifeExp < 40)
data("gapminder")
head(gapminder)
gapminder2 <-
filter(gapminder, continent == "Africa", year < 1966, lifeExp < 40)
View(gapminder2)
View(gapminder2)
filter(gapminder, continent == "Africa" & year < 1966 & lifeExp < 40 )
filter(gapminder, country == "Afghanistan" | country == "Albania")
arrange(gapminder, pop)
gapminder
arrange(gapminder, pop)
arrange(gapminder, -pop)
select(gapminder, year, lifeExp)
slice(gapminder, 10)
slice(gapminde)
slice(gapminder, 5)
slice(gapminder, 1:10)
?slice
df1 <- filter(gapminder,country == "Cambodia")
df2 <- select(df1, year, lifeExp)
df3 <- slice(df2, 1:2)
df3
gapminder %>%
filter(country == "Cambodia") %>%
select(year, lifeExp) %>%
slice(1:2)
?filter
gapminder %>%
filter(country == "Cambodia") %>%
select(year, lifeExp) %>%
slice(1:2) ->
df4
View(df4)
gapminder %>%
filter(country == "Cambodia") %>%
select(year, lifeExp) %>%
slice(5:10)
gapminder %>%
filter(country == "Cambodia") %>%  select(year, lifeExp) %>%   slice(1:2)
glimpse(gapminder)
gapminder <-
gapminder %>%
mutate(gdp = pop * gdpPercap)
glimpse(gapminder)
gapminder_sh <-
gapminder %>%
transmute(gdp = pop * gdpPercap)
gapminder_sh <-
gapminder %>%
transmute(gdp = pop * gdpPercap,
gdp2 = gdp^2)
View(gapminder_sh)
gapminder <-
gapminder %>%
mutate(gdp = pop * gdpPercap)
just_usa <- gapminder %>%
filter(country == "United States") %>%
select(year, gdpPercap) %>%
rename(usa_gdpPercap = gdpPercap)
View(just_usa)
gapminder <-
left_join(gapminder, just_usa, by = c("year"))
gapminder <-
gapminder %>%
mutate(gdpPercapRel = gdpPercap / usa_gdpPercap)
View(gapminder)
gapminder %>%
select(gdpPercapRel) %>%
summary()
gapminder %>%
filter(country == "Canada") %>%
select(country, year, gdpPercap, usa_gdpPercap, gdpPercapRel)
gapminder %>%
filter(country == "Mexico") %>%
select(country, year, gdpPercap, usa_gdpPercap, gdpPercapRel)
gapminder %>%
filter(gdpPercapRel > 5)
gapminder %>%
filter(gdpPercapRel > 7) %>%
```
gapminder %>%
filter(gdpPercapRel > 7)
gapminder %>%
filter(gdpPercapRel > 7) %>%
select(country, year, gdpPercapRel)
df_NAFTA<-
gapminder %>%
filter(country %in% c("Mexico", "Canada")) %>%
select(country, year, gdpPercap, usa_gdpPercap, gdpPercapRel)
just_usa_life <- gapminder %>%
filter(country == "United States") %>%
select(year, lifeExp) %>%
rename(usa_lifeExp = lifeExp)
gapminder <-
left_join(gapminder, just_usa_life, by = c("year"))
gapminder <-
gapminder %>%
mutate(lifeExpRel = lifeExp / usa_lifeExp)
gapminder %>%
select(lifeExpRel) %>%
summary()
gapminder <-
left_join(gapminder, just_usa_life, by = ("year"))
gapminder <-
gapminder %>%
mutate(lifeExpRel = lifeExp / usa_lifeExp)
gapminder %>%
select(lifeExpRel) %>%
summary()
just_usa_life <- gapminder %>%
filter(country == "United States") %>%
select(year, lifeExp) %>%
rename(usa_lifeExp = lifeExp)
gapminder <-
left_join(gapminder, just_usa_life, by = ("year"))
gapminder <-
gapminder %>%
mutate(lifeExpRel = lifeExp / usa_lifeExp)
gapminder %>%
select(lifeExpRel) %>%
summary()
glimpse(gapminder)
ggplot(gapminder, aes(x = gdpPercap, y = lifeExp))
ggplot(gapminder, aes(x = gdpPercap, y = lifeExp)) +
geom_point()
log(1)
log(3)
log(30)
log(30000000)
log10(gdpPercap)
ggplot(gapminder, aes(x = log10(gdpPercap), y = lifeExp)) +
geom_point()
ggplot(gapminder, aes(x = gdpPercap, y = lifeExp)) +
geom_point() +
scale_x_log10()
ggplot(gapminder, aes(x = gdpPercap, y = lifeExp, color = "red")) +
geom_point() +
scale_x_log10()
ggplot(gapminder, aes(x = gdpPercap, y = lifeExp, color = continent)) +
geom_point() +
scale_x_log10()
```{r}
ggplot(gapminder, aes(x = gdpPercap, y = lifeExp, color = continent)) +
geom_point(alpha = .3, size = 3) +
scale_x_log10()
ggplot(gapminder, aes(x = gdpPercap, y = lifeExp)) +
geom_point(alpha = .3, size = 3) +
geom_smooth() +
scale_x_log10()
ggplot(gapminder, aes(x = gdpPercap, y = lifeExp)) +
geom_point(alpha = .3, size = 3) +
geom_smooth() +
scale_x_log10()
ggplot(gapminder, aes(x = gdpPercap, y = lifeExp)) +
geom_point() +
geom_smooth(lwd = 2, se = FALSE) +
scale_x_log10()
ggplot(gapminder, aes(x = gdpPercap, y = lifeExp)) +
geom_point() +
geom_smooth(lwd = 2, se = FALSE,  method = "lm") +
scale_x_log10()
ggplot(gapminder, aes(x = gdpPercap, y = lifeExp, color = continent)) +
geom_point() +
geom_smooth(lwd = 2, se = FALSE,  method = "lm") +
scale_x_log10()
ggplot(gapminder, aes(x = gdpPercap, y = lifeExp, color = continent)) +
geom_point() +
scale_x_log10() +
facet_wrap(~ continent)
ggplot(gapminder, aes(x = gdpPercap, y = lifeExp, color = continent)) +
geom_point(alpha = .2) +
geom_smooth() +
scale_x_log10()  +
facet_wrap(~ continent)
```{r}
ggplot(gapminder, aes(x = gdpPercap, y = lifeExp)) +
geom_point(aes(color = continent, alpha = .2)) +
geom_smooth() +
scale_x_log10()  +
facet_wrap(~ continent)
ggplot(gapminder, aes(x = gdpPercap, y = lifeExp)) +
geom_point(aes(color = continent, alpha = .2)) +
geom_smooth(color = "black") +
scale_x_log10()  +
facet_wrap(~ continent)
ggplot(gapminder, aes(x = gdpPercap, y = lifeExp, color = continent)) +
geom_point() +
scale_x_log10() +
facet_wrap(~ continent)
ggplot(gapminder, aes(x = gdpPercap, y = lifeExp, color = continent)) +
geom_point(alpha = .2) +
geom_smooth() +
scale_x_log10()  +
facet_wrap(~ continent)
ggplot(gapminder, aes(x = year, y = lifeExp)) +
geom_point(aes(color = continent, alpha = .2)) +
geom_smooth(color = "black") +
scale_x_log10()  +
facet_wrap(~ continent)
ggplot(gapminder, aes(x = year, y = lifeExp)) +
geom_jitter(aes(color = continent, alpha = .2)) +
geom_smooth(color = "black") +
scale_x_log10()  +
facet_wrap(~ continent)
ggplot(gapminder, aes(gdpPercap, lifeExp, size = pop, colour = country)) +
geom_point(alpha = 0.7, show.legend = FALSE) +
scale_colour_manual(values = country_colors) +
scale_size(range = c(2, 12)) +
scale_x_log10() +
facet_wrap(~ continent) +
transition_time(year) +
labs(title = 'Year: {frame_time}', x = 'GDP per capita', y = 'life expectancy') +
theme_bw()
library(gganimate)
ggplot(gapminder, aes(gdpPercap, lifeExp, size = pop, colour = country)) +
geom_point(alpha = 0.7, show.legend = FALSE) +
scale_colour_manual(values = country_colors) +
scale_size(range = c(2, 12)) +
scale_x_log10() +
facet_wrap(~ continent) +
transition_time(year) +
labs(title = 'Year: {frame_time}', x = 'GDP per capita', y = 'life expectancy') +
theme_bw()
ggplot(gapminder, aes(gdpPercap, lifeExp, size = pop, colour = country)) +
geom_point(alpha = 0.7, show.legend = FALSE) +
scale_colour_manual(values = country_colors) +
scale_size(range = c(2, 12)) +
scale_x_log10() +
facet_wrap(~ continent) +
transition_time(year) +
labs(title = 'Year: {frame_time}', x = 'GDP per capita', y = 'life expectancy') +
theme_bw()
ggplot(filter(gapminder, country %in% some_countries),
aes(x = year, y = lifeExp, color = country)) +
geom_line() +
geom_point()
some_countries <- c("United States", "Canada", "Rwanda", "Cambodia", "Mexico")
ggplot(filter(gapminder, country %in% some_countries),
aes(x = year, y = lifeExp, color = country)) +
geom_line() +
geom_point()
ggplot(filter(gapminder, country %in% some_countries),
aes(x = year, y = lifeExp, color = country)) +
geom_line() +
geom_point(aes(size=gdpPercap))
ggplot(subset(gapminder, country %in% some_countries),
aes(x = year, y = lifeExp, color = country)) +
geom_line() +
geom_point(aes(size=gdpPercap)) +
theme_minimal()
ggplot(subset(gapminder, country %in% some_countries),
aes(x = year, y = lifeExp, color = country)) +
geom_line() +
geom_point(aes(size=gdpPercap)) +
theme_minimal() +
scale_color_brewer(palette = "Dark2")
library(gganimate)
ggplot(gapminder, aes(gdpPercap, lifeExp, size = pop, colour = country)) +
geom_point(alpha = 0.7, show.legend = FALSE) +
scale_colour_manual(values = country_colors) +
scale_size(range = c(2, 12)) +
scale_x_log10() +
facet_wrap(~ continent) +
transition_time(year) +
labs(title = 'Year: {frame_time}', x = 'GDP per capita', y = 'life expectancy') +
theme_bw()
setwd("G:/My Drive/Work/Teaching/Courses/Advanced Regression Analysis/govt_6029/Labs/lab2")
ggplot(gapminder, aes(gdpPercap, lifeExp, size = pop, colour = country)) +
geom_point(alpha = 0.7, show.legend = FALSE) +
scale_colour_manual(values = country_colors) +
scale_size(range = c(2, 12)) +
scale_x_log10() +
facet_wrap(~ continent) +
transition_time(year) +
labs(title = 'Year: {frame_time}', x = 'GDP per capita', y = 'life expectancy') +
theme_bw()
ggplot(gapminder, aes(gdpPercap, lifeExp, size = pop, colour = country)) +
geom_point(alpha = 0.7, show.legend = FALSE) +
scale_colour_manual(values = country_colors) +
scale_size(range = c(2, 12)) +
scale_x_log10() +
facet_wrap(~ continent) +
transition_time(year) +
labs(title = 'Year: {frame_time}', x = 'GDP per capita', y = 'life expectancy') +
theme_bw()
getwd()
getwd()
ggplot(gapminder, aes(gdpPercap, lifeExp, size = pop, colour = country)) +
geom_point(alpha = 0.7, show.legend = FALSE) +
scale_colour_manual(values = country_colors) +
scale_size(range = c(2, 12)) +
scale_x_log10() +
facet_wrap(~ continent) +
transition_time(year) +
labs(title = 'Year: {frame_time}', x = 'GDP per capita', y = 'life expectancy') +
theme_bw()
# Chunk 1: setup
knitr::opts_chunk$set(echo = TRUE, eval = F)
library(dplyr)
library(ggplot2)
library(gapminder)
# Chunk 3
data("gapminder")
head(gapminder)
# Chunk 4
glimpse(gapminder)
# Chunk 5
filter(gapminder, lifeExp < 29)
filter(gapminder, country == "Rwanda")
# Chunk 6
gapminder2 <-
filter(gapminder, continent == "Africa", year < 1966, lifeExp < 40)
# Chunk 7
filter(gapminder, continent == "Africa" & year < 1966 & lifeExp < 40 )
# Chunk 8
filter(gapminder, country == "Afghanistan" | country == "Albania")
# Chunk 9
arrange(gapminder, pop)
arrange(gapminder, -pop)
# Chunk 10
select(gapminder, year, lifeExp)
# Chunk 11
df1 <- filter(gapminder,country == "Cambodia")
df2 <- select(df1, year, lifeExp)
df3 <- slice(df2, 1:2)
# Chunk 12
gapminder %>%
filter(country == "Cambodia") %>%
select(year, lifeExp) %>%
slice(1:2)
# Chunk 13
gapminder <-
gapminder %>%
mutate(gdp = pop * gdpPercap)
gapminder
# Chunk 14
just_usa <- gapminder %>%
filter(country == "United States") %>%
select(year, gdpPercap) %>%
rename(usa_gdpPercap = gdpPercap)
# Chunk 15
gapminder <-
left_join(gapminder, just_usa, by = c("year"))
# Chunk 16
gapminder <-
gapminder %>%
mutate(gdpPercapRel = gdpPercap / usa_gdpPercap)
# Chunk 17
gapminder %>%
select(gdpPercapRel) %>%
summary()
# Chunk 18
gapminder %>%
filter(country == "Canada") %>%
select(country, year, gdpPercap, usa_gdpPercap, gdpPercapRel)
gapminder %>%
filter(country == "Mexico") %>%
select(country, year, gdpPercap, usa_gdpPercap, gdpPercapRel)
# Chunk 19
df_NAFTA<-
gapminder %>%
filter(country %in% c("Mexico", "Canada")) %>%
select(country, year, gdpPercap, usa_gdpPercap, gdpPercapRel)
# Chunk 20
just_usa_life <- gapminder %>%
filter(country == "United States") %>%
select(year, lifeExp) %>%
rename(usa_lifeExp = lifeExp)
gapminder <-
left_join(gapminder, just_usa_life, by = ("year"))
gapminder <-
gapminder %>%
mutate(lifeExpRel = lifeExp / usa_lifeExp)
gapminder %>%
select(lifeExpRel) %>%
summary()
# Chunk 21
glimpse(gapminder)
# Chunk 23
ggplot(gapminder, aes(x = gdpPercap, y = lifeExp)) +
geom_point()
# Chunk 24
ggplot(gapminder, aes(x = log10(gdpPercap), y = lifeExp)) +
geom_point()
# Chunk 25
ggplot(gapminder, aes(x = gdpPercap, y = lifeExp)) +
geom_point() +
scale_x_log10()
# Chunk 26
ggplot(gapminder, aes(x = gdpPercap, y = lifeExp, color = continent)) +
geom_point() +
scale_x_log10()
# Chunk 27
ggplot(gapminder, aes(x = gdpPercap, y = lifeExp, color = continent)) +
geom_point(alpha = .3, size = 3) +
scale_x_log10()
# Chunk 28
ggplot(gapminder, aes(x = gdpPercap, y = lifeExp)) +
geom_point(alpha = .3, size = 3) +
geom_smooth() +
scale_x_log10()
# Chunk 29
ggplot(gapminder, aes(x = gdpPercap, y = lifeExp)) +
geom_point() +
geom_smooth(lwd = 2, se = FALSE) +
scale_x_log10()
# Chunk 30
ggplot(gapminder, aes(x = gdpPercap, y = lifeExp)) +
geom_point() +
geom_smooth(lwd = 2, se = FALSE,  method = "lm") +
scale_x_log10()
# Chunk 31
ggplot(gapminder, aes(x = gdpPercap, y = lifeExp, color = continent)) +
geom_point() +
geom_smooth(lwd = 2, se = FALSE,  method = "lm") +
scale_x_log10()
# Chunk 32
ggplot(gapminder, aes(x = gdpPercap, y = lifeExp, color = continent)) +
geom_point() +
scale_x_log10() +
facet_wrap(~ continent)
# Chunk 33
ggplot(gapminder, aes(x = gdpPercap, y = lifeExp, color = continent)) +
geom_point(alpha = .2) +
geom_smooth() +
scale_x_log10()  +
facet_wrap(~ continent)
# Chunk 34
ggplot(gapminder, aes(x = year, y = lifeExp)) +
geom_jitter(aes(color = continent, alpha = .2)) +
geom_smooth(color = "black") +
scale_x_log10()  +
facet_wrap(~ continent)
library(gganimate)
ggplot(gapminder, aes(gdpPercap, lifeExp, size = pop, colour = country)) +
geom_point(alpha = 0.7, show.legend = FALSE) +
scale_colour_manual(values = country_colors) +
scale_size(range = c(2, 12)) +
scale_x_log10() +
facet_wrap(~ continent) +
transition_time(year) +
labs(title = 'Year: {frame_time}', x = 'GDP per capita', y = 'life expectancy') +
theme_bw()
ggplot(gapminder, aes(gdpPercap, lifeExp, size = pop, colour = country)) +
geom_point(alpha = 0.7, show.legend = FALSE) +
scale_colour_manual(values = country_colors) +
scale_size(range = c(2, 12)) +
scale_x_log10() +
facet_wrap(~ continent) +
transition_time(year) +
labs(title = 'Year: {frame_time}', x = 'GDP per capita', y = 'life expectancy') +
theme_bw()
library(gganimate)
ggplot(gapminder, aes(gdpPercap, lifeExp, size = pop, colour = country)) +
geom_point(alpha = 0.7, show.legend = FALSE) +
scale_colour_manual(values = country_colors) +
scale_size(range = c(2, 12)) +
scale_x_log10() +
facet_wrap(~ continent) +
transition_time(year) +
labs(title = 'Year: {frame_time}', x = 'GDP per capita', y = 'life expectancy') +
theme_bw()
ggplot(gapminder, aes(gdpPercap, lifeExp, size = pop, colour = country)) +
geom_point(alpha = 0.7, show.legend = FALSE) +
scale_colour_manual(values = country_colors) +
scale_size(range = c(2, 12)) +
scale_x_log10() +
facet_wrap(~ continent) +
transition_time(year) +
labs(title = 'Year: {frame_time}', x = 'GDP per capita', y = 'life expectancy') +
theme_bw()
getwd()
??`gganimate-package`
ggplot(gapminder, aes(gdpPercap, lifeExp, size = pop, colour = country)) +
geom_point(alpha = 0.7, show.legend = FALSE) +
scale_colour_manual(values = country_colors) +
scale_size(range = c(2, 12)) +
scale_x_log10() +
facet_wrap(~continent) +
# Here comes the gganimate specific bits
labs(title = 'Year: {frame_time}', x = 'GDP per capita', y = 'life expectancy') +
transition_time(year) +
ease_aes('linear')
p<-
ggplot(gapminder, aes(gdpPercap, lifeExp, size = pop, colour = country)) +
geom_point(alpha = 0.7, show.legend = FALSE) +
scale_colour_manual(values = country_colors) +
scale_size(range = c(2, 12)) +
scale_x_log10() +
facet_wrap(~ continent) +
transition_time(year) +
labs(title = 'Year: {frame_time}', x = 'GDP per capita', y = 'life expectancy') +
theme_bw()
p
animate(p)
ggplot(gapminder, aes(gdpPercap, lifeExp, size = pop, colour = country)) +
geom_point(alpha = 0.7, show.legend = FALSE) +
scale_colour_manual(values = country_colors) +
scale_size(range = c(2, 12)) +
scale_x_log10() +
facet_wrap(~ continent) +
transition_time(year) +
labs(title = 'Year: {frame_time}', x = 'GDP per capita', y = 'life expectancy') +
theme_bw()
